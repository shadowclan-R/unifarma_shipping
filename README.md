# نظام تكامل شركات الشحن مع Unifarma
قمت بتطوير نظام متكامل لإدارة وتوحيد عمليات الشحن لشركة Unifarma باستخدام إطار عمل Django. النظام يربط بين منصة إدارة الصفقات (Citrix24 CRM) وشركات الشحن المختلفة، مع دعم حسابات متعددة لكل شركة شحن (داخلي، دولي، أو لدول محددة).

## المكونات الرئيسية للنظام
### 1. البنية التحتية

    # إنشاء بيئة افتراضية وتثبيت المكتبات
    python -m venv venv
    source venv/bin/activate
    pip install django djangorestframework requests celery django-celery-beat redis psycopg2-binary

### 2. هيكل المشروع
- تطبيق core: للوظائف المشتركة والإعدادات العامة
- تطبيق crm_integration: للتكامل مع نظام سيتريكس24
- تطبيق shippers: لإدارة شركات الشحن وحساباتها
- تطبيق orders: لإدارة الطلبات والشحنات
- تطبيق api: لواجهات برمجة التطبيقات

### 3. التكامل مع سيتريكس24
- استخدام API لجلب الصفقات في مرحلة "تم الشحن مع الشركة"
- واجهة Webhook لاستقبال تحديثات الصفقات
- مهام مجدولة باستخدام Celery لمزامنة البيانات

### 4. اختيار شركة الشحن
خدمة ذكية تحدد شركة الشحن المناسبة بناءً على:

- الدولة المطلوب الشحن إليها
- نوع الشحن (داخلي/دولي)
- قواعد التعيين المخصصة في النظام

### 5. تكامل مع شركات الشحن
- تصميم معماري قائم على مبدأ Adapter Pattern
- تنفيذ محول متكامل لشركة SMSA استنادًا على وثائق API المقدمة
- قابلية إضافة محولات جديدة لشركات شحن أخرى

### 6. إدارة الشحنات
- إنشاء الشحنات تلقائيًا استنادًا إلى بيانات الصفقات
- تتبع حالة الشحنات وتحديثها
- تخزين سجل كامل لأحداث الشحنة

### 7. واجهات API
    # مثال لإنشاء شحنة عبر API
    POST /api/v1/orders/{id}/create_shipment/

### 8. الأمان والإعدادات
- تخزين آمن لمفاتيح API وبيانات الاعتماد
- استخدام ملفات .env لفصل إعدادات البيئات المختلفة
- تشفير نقل البيانات عبر HTTPS
## ملخص الميزات
- عمليات آلية: جلب الصفقات من سيتريكس وإرسالها لشركات الشحن المناسبة تلقائيًا
- مرونة: دعم حسابات متعددة لكل شركة شحن (داخلي، دولي، لدول محددة)
- تتبع: سجل كامل للطلبات والشحنات وحالتها
- توسع: قابلية إضافة شركات شحن جديدة بسهولة
- إدارة: واجهة إدارة متكاملة لمتابعة وضبط النظام
- API: واجهات برمجية RESTful للتكامل مع أنظمة أخرى
- مهام مجدولة: تحديث مستمر لحالة الشحنات وجلب الصفقات الجديدة